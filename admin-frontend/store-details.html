<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>إدارة العروض - لوحة الأدمن</title>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;800&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.rtl.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --primary-color: #667eea;
            --secondary-color: #764ba2;
        }
        
        body {
            font-family: 'Tajawal', sans-serif;
            background-color: #f8f9fa;
        }
        
        .navbar {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%) !important;
            box-shadow: 0 2px 10px rgba(0,0,0,0.15);
            padding: 0.75rem 0;
        }
        .navbar-nav .nav-link {
            color: #ffffff !important;
            font-weight: 500;
            padding: 0.6rem 1rem !important;
            margin: 0 0.2rem;
            border-radius: 8px;
            transition: all 0.3s ease;
            font-size: 15px;
        }
        .navbar-nav .nav-link:hover {
            background-color: rgba(255,255,255,0.15);
            color: #ffffff !important;
            transform: translateY(-1px);
        }
        .navbar-nav .nav-link.active {
            background-color: rgba(255,255,255,0.25);
            color: #ffffff !important;
            font-weight: 600;
        }
        .navbar-nav .dropdown-toggle {
            color: #ffffff !important;
            font-size: 1.8rem !important;
            padding: 0.4rem 0.8rem !important;
            border-radius: 50%;
            transition: all 0.3s ease;
        }
        .navbar-nav .dropdown-toggle:hover {
            background-color: rgba(255,255,255,0.15);
            transform: scale(1.1);
        }
        .dropdown-menu {
            background-color: #ffffff;
            border: none;
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
            padding: 0.5rem 0;
            min-width: 220px;
            margin-top: 0.5rem;
            position: absolute !important;
            z-index: 1050;
            white-space: nowrap;
        }
        .dropdown-menu-start {
            right: 0 !important;
            left: auto !important;
        }
        .dropdown-item {
            color: #495057 !important;
            padding: 0.75rem 1.25rem;
            font-size: 15px;
            font-weight: 500;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
        }
        .dropdown-item i {
            width: 20px;
            text-align: center;
            margin-left: 8px;
        }
        .dropdown-item:hover {
            background-color: #f8f9fa;
            color: var(--primary-color) !important;
        }
        .navbar-toggler {
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 8px;
        }
        .navbar-toggler-icon {
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='rgba%28255, 255, 255, 0.85%29' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e");
        }
        
        .offer-card {
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            transition: all 0.3s ease;
            height: 100%;
        }
        
        .offer-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        
        .offer-image {
            height: 200px;
            background-color: #f8f9fa;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            position: relative;
        }
        
        .offer-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease;
        }
        
        .offer-card:hover .offer-image img {
            transform: scale(1.05);
        }
        
        .offer-image .placeholder {
            font-size: 48px;
            color: #adb5bd;
        }
        
        .offer-content {
            padding: 1.25rem;
        }
        
        .offer-title {
            font-weight: 700;
            margin-bottom: 0.5rem;
            color: #343a40;
        }
        
        .offer-description {
            color: #6c757d;
            font-size: 0.9rem;
            margin-bottom: 1rem;
            line-height: 1.5;
        }
        
        .offer-status {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 1rem;
        }
        
        .status-badge {
            padding: 0.35rem 0.75rem;
            border-radius: 50px;
            font-size: 0.8rem;
            font-weight: 600;
        }
        
        .status-active {
            background-color: #d4edda;
            color: #155724;
        }
        
        .status-inactive {
            background-color: #f8d7da;
            color: #721c24;
        }
        
        .form-switch {
            padding-right: 2.5em;
        }
        
        .form-switch .form-check-input {
            width: 3em;
            margin-right: -2.5em;
        }
        
        .upload-area {
            border: 2px dashed #dee2e6;
            border-radius: 12px;
            background: #f8f9fa;
            transition: all 0.3s ease;
            cursor: pointer;
            padding: 2rem;
            text-align: center;
        }

        .upload-area:hover {
            background: #e9ecef;
            border-color: #adb5bd;
        }
        
        .image-preview {
            max-width: 100%;
            max-height: 200px;
            border-radius: 8px;
            margin-top: 1rem;
        }
        
        .offer-badge {
            position: absolute;
            top: 10px;
            left: 10px;
            background: linear-gradient(135deg, #ff6b6b, #ee5a52);
            color: white;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
            z-index: 2;
        }
        
        .offer-discount {
            position: absolute;
            top: 10px;
            right: 10px;
            background: linear-gradient(135deg, #4ecdc4, #44a08d);
            color: white;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
            z-index: 2;
        }
        
        .no-results {
            text-align: center;
            padding: 3rem;
            color: #6c757d;
        }
        
        .no-results i {
            font-size: 4rem;
            margin-bottom: 1rem;
            color: #dee2e6;
        }
        
        .black-checkbox {
            accent-color: black;
        }
        
        .custom-switch {
            background-color: #ddd;
            border-radius: 50px;
            transition: background-color 0.3s;
        }

        .custom-switch:before {
            background-color: #fff;
            transition: transform 0.3s;
        }

        .custom-switch:checked {
            background-color: #28a745;
        }

        .custom-switch:checked:before {
            transform: translateX(1.5rem);
        }

        .form-check-input.custom-switch {
            width: 3rem;
            height: 1.5rem;
        }

        .form-check-input.custom-switch:before {
            height: 1.5rem;
            border-radius: 50%;
            top: 0;
            left: 0;
            content: '';
            position: absolute;
        }
        
        /* تحسينات التنقل بين الصفحات */
        .pagination-container {
            display: flex;
            justify-content: center;
            margin-top: 2rem;
            padding: 1rem 0;
        }
        
        .pagination {
            direction: ltr;
            display: flex;
            gap: 0.5rem;
        }
        
        .page-item.active .page-link {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
        }
        
        .page-link {
            color: var(--primary-color);
            border-radius: 8px;
            padding: 0.5rem 1rem;
            border: 1px solid #dee2e6;
            transition: all 0.3s ease;
        }
        
        .page-link:hover {
            background-color: #f8f9fa;
            color: var(--secondary-color);
        }
        
        .page-info {
            text-align: center;
            margin-bottom: 1rem;
            color: #6c757d;
            font-size: 0.9rem;
        }
        
        .results-count {
            background-color: #e9ecef;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.85rem;
            margin-bottom: 1rem;
            display: inline-block;
        }
       @media screen and (max-width: 400px) {
            .pagination-container {
                margin-top: 1rem;         /* مسافة أقل */
                padding: 0.5rem 0;   
                display: flow-root;
  }
}
    </style>
</head>
<body>
  

    <header class="bg-white border-bottom">
        <div class="container-xxl px-3 py-3">
            <h1 class="h4 m-0">إدارة العروض</h1>
        </div>
    </header>

    <main class="container-xxl px-3 my-4">
       

        <!-- فلتر البحث -->
      <!-- البحث عن عرض -->
<div class="row g-2 mb-4 justify-content-center">
  <div class="col-md-4">
    <input type="text" class="form-control " placeholder="البحث عن عرض..." id="searchOffer" onkeyup="filterOffers()">
  </div>
  <div class="col-md-3">
    <select class="form-control " id="statusFilter" onchange="filterOffers()">
      <option value="">جميع الحالات</option>
      <option value="active">نشط</option>
      <option value="inactive">غير نشط</option>
    </select>
  </div>
</div>



        <!-- شبكة العروض -->
        <div class="row g-4" id="offersGrid">
            <!-- سيتم إضافة العروض ديناميكياً -->
        </div>
        
        <!-- رسالة عدم وجود نتائج -->
        <div id="noResults" class="no-results d-none">
            <i class="fas fa-search"></i>
            <h5>لا توجد عروض تطابق معايير البحث</h5>
            <p class="text-muted">جرب تغيير كلمات البحث أو معايير التصفية</p>
        </div>
        
        <!-- تنقل بين الصفحات -->
        <div class="pagination-container">
            <nav aria-label="تنقل بين الصفحات">
                <ul class="pagination" id="pagination">
                    <!-- سيتم إضافة أزرار الصفحات ديناميكياً -->
                </ul>
            </nav>
        </div>
    </main>
<footer class="bg-light text-center py-3 mt-auto shadow-sm">
  <div class="container">
    <p class="mb-0">
      © 2025 <a href="https://codnaitsolutions.com/" target="_blank" class="text-decoration-none text-dark">By Codna IT Solution</a>
    </p>
  </div>
</footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // بيانات العروض
        const offers = [
            {
                id: 1,
                title: "عرض نهاية الموسم",
                description: "خصم 50% على جميع المنتجات الإلكترونية لمدة محدودة. استفد من هذا العرض قبل نفاذ الكمية.",
                status: "active",
                category: "discount",
                image: "https://images.unsplash.com/photo-1607082350899-7e105aa886ae?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80"
            },
            {
                id: 2,
                title: "عرض 2 مقابل 1",
                description: "اشترِ منتجين واحصل على الثالث مجاناً. العرض ساري على جميع المنتجات المنزلية.",
                status: "inactive",
                category: "bundle",
                image: "https://images.unsplash.com/photo-1441986300917-64674bd600d8?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80"
            },
            {
                id: 3,
                title: "عروض الصيف الحصرية",
                description: "خصومات تصل إلى 50% على منتجات الصيف. تشمل الملابس الصيفية، المنتجات البحرية والمزيد.",
                status: "active",
                category: "seasonal",
                image: "https://copon5sm.com/wp-content/uploads/2024/07/%D8%B9%D8%B1%D9%88%D8%B6-%D8%A7%D9%84%D8%B5%D9%8A%D9%81.jpg"
            },
            {
                id: 4,
                title: "عرض الهدايا المجانية",
                description: "احصل على هدية مجانية مع كل عملية شراء تزيد عن 100 دينار. اختر من بين مجموعة الهدايا المتاحة.",
                status: "inactive",
                category: "gift",
                image: "https://images.unsplash.com/photo-1549465220-1a8b9238cd48?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80"
            },
            {
                id: 5,
                title: "خصم 20% على الملابس",
                description: "استفد من خصم 20% على جميع الملابس لمدة أسبوع فقط. العرض يشمل جميع الفئات والأحجام.",
                status: "active",
                category: "discount",
                image: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSAh124t0QIrW4fn4-Df0-ukGiyhR-ajyJayw&s"
            },
            {
                id: 6,
                title: "توصيل مجاني",
                description: "توصيل مجاني لجميع الطلبات التي تزيد عن 50 دينار. استمتع بالتسوق بدون أي تكاليف إضافية.",
                status: "inactive",
                category: "free_shipping",
                image: "https://www.easy-orders.net/blog/wp-content/uploads/2023/02/free-shipping-delivery-service-logo-badge-vector-780x470.webp"
            },
            {
                id: 7,
                title: "عرض خاص على الأجهزة المنزلية",
                description: "خصم 30% على جميع الأجهزة المنزلية لمدة أسبوع. العرض يشمل الثلاجات، الغسالات والمزيد.",
                status: "active",
                category: "discount",
                image: "https://zagzoog.com/uploads/project_thumb/781-Zagzoog_image_1.jpg"
            },
            {
                id: 8,
                title: "عرض العودة إلى المدارس",
                description: "خصومات تصل إلى 40% على جميع مستلزمات المدارس والقرطاسية. استعد للموسم الدراسي الجديد.",
                status: "active",
                category: "seasonal",
                image: "https://images.unsplash.com/photo-1503676260728-1c00da094a0b?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80"
            },
            {
                id: 9,
                title: "عرض المنتجات المميزة",
                description: "خصم 25% على مجموعة المنتجات المميزة لمدة محدودة. استفد من هذا العرض الحصري.",
                status: "inactive",
                category: "discount",
                image: "https://images.unsplash.com/photo-1441984904996-e0b6ba687e04?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80"
            },
            {
                id: 10,
                title: "عرض عيد الأم",
                description: "خصومات خاصة بمناسبة عيد الأم على مجموعة مختارة من الهدايا والعطور.",
                status: "active",
                category: "seasonal",
                image: "https://d1csarkz8obe9u.cloudfront.net/posterpreviews/best-template-happy-mother-day-poster-%26-flyer-design-e6b88cfbe31cb55d8a7390ca9ab97956_screen.jpg?ts=1651853512"
            },
            {
                id: 11,
                title: "عرض المنتجات الجديدة",
                description: "خصم 15% على جميع المنتجات الجديدة لمدة أسبوع. كن أول من يحصل عليها.",
                status: "active",
                category: "discount",
                image: "https://images.unsplash.com/photo-1441986300917-64674bd600d8?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=800&q=80"
            },
            {
                id: 12,
                title: "عرض التوصيل السريع",
                description: "توصيل مجاني وسريع خلال 24 ساعة لجميع الطلبات التي تزيد عن 100 دينار.",
                status: "inactive",
                category: "free_shipping",
                image: "https://vid.alarabiya.net/images/2024/03/30/e4c105ad-3bf5-469a-b5a1-4f84e6ad8555/e4c105ad-3bf5-469a-b5a1-4f84e6ad8555_16x9_1200x676.jpg?width=555&format=jpg"
            }
        ];

        // متغيرات التنقل بين الصفحات
        let currentPage = 1;
        const offersPerPage = 6;
        let filteredOffers = [...offers];

        // تهيئة الصفحة
        document.addEventListener('DOMContentLoaded', function() {
            renderOffers();
            setupPagination();
            updateResultsCount();
        });

        // عرض العروض
        function renderOffers() {
            const offersGrid = document.getElementById('offersGrid');
            offersGrid.innerHTML = '';
            
            const startIndex = (currentPage - 1) * offersPerPage;
            const endIndex = startIndex + offersPerPage;
            const currentOffers = filteredOffers.slice(startIndex, endIndex);
            
            if (currentOffers.length === 0) {
                document.getElementById('noResults').classList.remove('d-none');
                return;
            } else {
                document.getElementById('noResults').classList.add('d-none');
            }
            
            currentOffers.forEach(offer => {
                const offerElement = document.createElement('div');
                offerElement.className = 'col-md-6 col-lg-4 offer-item';
                offerElement.setAttribute('data-status', offer.status);
                offerElement.setAttribute('data-category', offer.category);
                offerElement.setAttribute('data-title', offer.title);
                
                const statusText = offer.status === 'active' ? 'نشط' : 'غير نشط';
                const statusClass = offer.status === 'active' ? 'status-active' : 'status-inactive';
                const isChecked = offer.status === 'active';
                
                offerElement.innerHTML = `
                    <div class="card offer-card">
                        <div class="offer-image">
                            <img src="${offer.image}" alt="${offer.title}">
                        </div>
                        <div class="offer-content">
                            <h5 class="offer-title">${offer.title}</h5>
                            <p class="offer-description">${offer.description}</p>
                            <div class="offer-status">
                                <span class="status-badge ${statusClass}">${statusText}</span>
                                <div class="form-check form-switch">
                                    <input class="form-check-input custom-switch" type="checkbox" ${isChecked ? 'checked' : ''} onchange="toggleOfferStatus(${offer.id}, this)">
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                
                offersGrid.appendChild(offerElement);
            });
        }

        // إعداد التنقل بين الصفحات
        function setupPagination() {
            const pagination = document.getElementById('pagination');
            pagination.innerHTML = '';
            
            const totalPages = Math.ceil(filteredOffers.length / offersPerPage);
            
            // زر الصفحة السابقة
            const prevLi = document.createElement('li');
            prevLi.className = `page-item ${currentPage === 1 ? 'disabled' : ''}`;
            prevLi.innerHTML = `<a class="page-link" href="#" onclick="changePage(${currentPage - 1})">السابق</a>`;
            pagination.appendChild(prevLi);
            
            // أزرار الصفحات
            for (let i = 1; i <= totalPages; i++) {
                const pageLi = document.createElement('li');
                pageLi.className = `page-item ${i === currentPage ? 'active' : ''}`;
                pageLi.innerHTML = `<a class="page-link" href="#" onclick="changePage(${i})">${i}</a>`;
                pagination.appendChild(pageLi);
            }
            
            // زر الصفحة التالية
            const nextLi = document.createElement('li');
            nextLi.className = `page-item ${currentPage === totalPages ? 'disabled' : ''}`;
            nextLi.innerHTML = `<a class="page-link" href="#" onclick="changePage(${currentPage + 1})">التالي</a>`;
            pagination.appendChild(nextLi);
        }

        // تغيير الصفحة
        function changePage(page) {
            const totalPages = Math.ceil(filteredOffers.length / offersPerPage);
            
            if (page < 1 || page > totalPages) return;
            
            currentPage = page;
            renderOffers();
            setupPagination();
            updateResultsCount();
        }

        // تحديث عدد النتائج المعروضة
        function updateResultsCount() {
            const startIndex = (currentPage - 1) * offersPerPage + 1;
            const endIndex = Math.min(currentPage * offersPerPage, filteredOffers.length);
            
            document.getElementById('currentCount').textContent = `${startIndex}-${endIndex}`;
            document.getElementById('totalCount').textContent = filteredOffers.length;
        }

        // فلتر العروض
      function filterOffers() {
    const searchTerm = document.getElementById('searchOffer').value.toLowerCase();
    const statusFilter = document.getElementById('statusFilter').value;

    filteredOffers = offers.filter(offer => {
        const matchesSearch = offer.title.toLowerCase().includes(searchTerm) 
                           || offer.description.toLowerCase().includes(searchTerm); // بحث بالوصف كمان
        const matchesStatus = !statusFilter || offer.status === statusFilter;
        return matchesSearch && matchesStatus;
    });

    currentPage = 1;
    renderOffers();
    setupPagination();
    updateResultsCount();
}


        function toggleOfferStatus(id, checkbox) {
            const offer = offers.find(o => o.id === id);
            if (!offer) return;
            
            offer.status = checkbox.checked ? 'active' : 'inactive';
            
            // إعادة التصفية إذا كان هناك فلتر نشط
            filterOffers();
            
            console.log(`${checkbox.checked ? 'Activated' : 'Deactivated'} offer:`, id);
        }
    </script>
</body>
</html>